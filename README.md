# 餐費計算機

一個單檔（HTML/CSS/JS）即可離線使用的餐費分攤計算工具。用來快速紀錄參與者、個別折扣、共同優惠與均分費用，並依指定順序計算每人應付金額。

## 功能特色
- 參與者（用餐人士）清單：
  - 支援同名自動合併計算
  - 個人折扣：金額或比例（比例可設上限）
  - 人員排序可拖曳
- 共同優惠區：
  - 支援金額/比例（比例可設上限）
  - 攤分方式：平均或按餐費比例
  - 項目可拖曳排序
- 均分費用區：
  - 支援金額/比例（比例可設上限；比例以餐費小計為基準）
  - 攤分方式：平均或按餐費比例
  - 項目可拖曳排序
- 計算順序可自訂（可拖曳）：
  - (+) 人員區（個人折扣後合計）
  - (-) 共同優惠區
  - (+) 均分費用區
- 進位與顯示：
  - 支援四捨五入／上捨入／下捨入
  - 小數位數可調（0–10）
  - 可選擇顯示詳細計算步驟
- 刪除前確認：
  - 可於設定視窗開關，預設開啟
  - 套用於人員、共同優惠、均分費用、常用資訊清單的刪除
- 常用資訊管理：
  - 管理常用的人員、費用、優惠名稱，支援拖曳排序與刪除
  - 輸入欄位提供 datalist 快速套用
- 資料保存：
  - 自動存於瀏覽器 localStorage，下次打開自動還原

## 開始使用
1. 直接以瀏覽器開啟 `MealCostSharing.html`。
2. 依序填寫：
   - 參與者/用餐人士：填入姓名與餐費，必要時設定個人折扣。
   - 均分費用：例如外送費、服務費；可選擇金額或比例，並決定平均或比例攤分。
   - 共同優惠：例如折扣券、滿額折抵；可選擇金額或比例（可設上限），並決定平均或比例攤分。
   - 計算方式：拖曳三個區塊調整計算順序。
3. 於「進行計算」區：
   - 設定進位方式與小數位數。
   - 勾選「顯示計算過程」可檢視每一步的計算細節。
   - 點擊「計算」產生每人應付金額與總收款金額。

## 計算規則說明
- 人員區：
  - 以同名合併（加總該姓名所有項目）。
  - 個人折扣：
    - 金額：直接從該項目餐費扣除固定金額。
    - 比例：以該項目餐費 × 百分比；若有上限，超過則以上限為準。
- 共同優惠區（-）：
  - 優惠總額：
    - 金額：使用設定值。
    - 比例：以「當前總額」× 百分比；若有上限，超過則以上限為準。
  - 攤分：
    - 平均：按參與者人數平均分攤折扣。
    - 按比例：依各自的「餐費小計（折扣前的餐費合計）」占比分攤折扣。
  - 連續多個百分比優惠時，後者會以前一步更新後的「當前總額」為基礎計算。
- 均分費用區（+）：
  - 費用總額：
    - 金額：使用設定值。
    - 比例：以「餐費小計（折扣前的合計）」× 百分比；若有上限，超過則以上限為準。
  - 攤分：
    - 平均：按參與者人數平均分攤費用。
    - 按比例：依「餐費小計（折扣前）」占比分攤費用。
- 進位：
  - 依設定的進位方式與小數位數，最終逐人金額會被進位後再相加得到收款總計。
  - 若某人金額因折扣為負，最低會顯示為 0。

## 常用資訊管理
- 右上角「⚙️」開啟管理視窗，可維護三類清單：人員、費用、優惠。
- 清單支援拖曳排序、刪除；輸入欄位可透過下拉自動完成快速套用。
- 設定視窗亦提供「刪除前確認」開關（預設開啟），可控制刪除動作是否跳出確認。
- 任何新增的名稱在使用時會自動寫入常用清單。

## 相容性
- 現代桌面與行動裝置瀏覽器（Chrome、Edge、Firefox、Safari）皆可使用。
- 支援淺色/深色模式與行動裝置 RWD。

## 資料保存
- 使用瀏覽器 `localStorage` 保存設定與表單資料；同一瀏覽器下次開啟會自動還原。
- 若需重置，清空瀏覽器儲存空間或刪除該站點的 `localStorage` 即可。

## 授權
- 本專案以 MIT 授權釋出，詳見 `LICENSE`。

## 線上使用

你可以透過以下連結直接使用此工具：
[餐費計算工具](https://joengan.github.io/MealCostSharing/MealCostSharing.html)
